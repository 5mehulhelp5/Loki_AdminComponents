<?php
declare(strict_types=1);

/** @version 0.2.3 */

use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;
use Loki\AdminComponents\Form\Field\Field;
use Loki\AdminComponents\ViewModel\FieldViewModel;
use Loki\Components\Factory\ViewModelFactory;
use Loki\Components\Util\Block\TemplateRenderer;

/** @var Escaper $escaper */
/** @var Template $block */
/** @var Field $field */
/** @var TemplateRenderer $templateRenderer */
/** @var ViewModelFactory $viewModelFactory */

$field = $block->getField();
if (false === $field instanceof Field) {
    $fieldViewModel = $viewModelFactory->create(FieldViewModel::class);
    $field = $fieldViewModel->getField($block);
}
?>
<div class="<?= $css('admin__field', '@todo') ?>">
    <div class="<?= $css('admin__field-label', '@todo') ?>">
        <label for="<?= $escaper->escapeHtml($field->getCode()) ?>">
            <span><?= $escaper->escapeHtml($field->getLabel()) ?></span>
        </label>
    </div>

    <div class="<?= $css('admin__field-control', '@todo') ?>">
        <?= /* @noEscape */ $templateRenderer->html(
            $block,
            $field->getFieldType()->getTemplate(),
            ['field' => $field]
        ) ?>
    </div>
</div>
