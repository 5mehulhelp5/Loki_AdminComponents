<?php
declare(strict_types=1);

/** @version 0.2.3 */

use Magento\Framework\Escaper;
use Magento\Framework\View\Element\Template;
use Loki\AdminComponents\Component\Form\FormViewModel;
use Loki\Components\Util\Block\BlockRenderer;
use Loki\Components\Util\Block\ChildRenderer;
use Loki\Components\Util\Block\TemplateRenderer;

/** @var Escaper $escaper */
/** @var Template $block */
/** @var FormViewModel $viewModel */
/** @var BlockRenderer $blockRenderer */
/** @var ChildRenderer $childRenderer */
/** @var TemplateRenderer $templateRenderer */
if (!isset($viewModel)) {
    throw new RuntimeException('Did you make sure to declare the block "'.$block->getNameInLayout().'" as a Loki Component via "etc/loki_components.xml"?');
}
?>
<div class="<?= $css('loki-form form') ?>">
    <?= /* @noEscape */ $blockRenderer->html(
        $block,
        'loki-admin.form.actions',
        ['view_model' => $viewModel]
    ) ?>

    <div class="<?= $css('page-columns', 'columns') ?>">
        <div class="<?= $css('main-col', 'main-col') ?>">
            <?= /* @noEscape */ $blockRenderer->html($block, 'loki-admin.form.spinner') ?>
            <?= /* @noEscape */ $blockRenderer->html($block, 'loki-admin.form.inner') ?>

            <div class="<?= $css('entry-edit form-inline', 'form') ?>">
                <div class="<?= $css('fieldset-wrapper', 'field-wrapper') ?>">
                    <h1><?= $escaper->escapeHtml($block->getLabel()) ?></h1>
                    <div class="<?= $css('admin__fieldset-wrapper-content', 'wrapper-content') ?>">
                        <fieldset class="<?= $css('admin__fieldset', 'fieldset') ?>">
                            <?php foreach ($viewModel->getFields() as $field) : ?>
                                <?= /* @noEscape */ $templateRenderer->html(
                                    $block,
                                    'Loki_AdminComponents::form/field.phtml',
                                    ['field' => $field]
                                ); ?>
                            <?php endforeach; ?>
                        </fieldset>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

